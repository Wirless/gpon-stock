<%- include('../partials/header') %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Create New Deposit</h1>
  <a href="/deposits" class="btn btn-outline-secondary">
    <i class="fas fa-arrow-left me-2"></i> Back to Deposits
  </a>
</div>

<div class="row">
  <div class="col-md-8 offset-md-2">
    <!-- Camera Capture Card -->
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="fas fa-camera me-2"></i> Quick Scan GPON Device</h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <div class="text-center mb-3">
              <p>Take a photo of the back of the GPON device or select an existing image to automatically fill the form</p>
              <button id="camera-btn" class="btn btn-primary">
                <i class="fas fa-camera me-2"></i> Open Camera
              </button>
            </div>
            <div id="camera-container" class="d-none">
              <video id="camera-preview" class="w-100 mb-2 border rounded" autoplay></video>
              <div class="d-flex justify-content-center mb-3">
                <button id="capture-btn" class="btn btn-success me-2">
                  <i class="fas fa-camera me-2"></i> Capture
                </button>
                <button id="camera-close-btn" class="btn btn-secondary">
                  <i class="fas fa-times me-2"></i> Close
                </button>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div id="captured-image-container" class="text-center">
              <canvas id="captured-image" class="w-100 border rounded d-none"></canvas>
              <div id="scan-status" class="mt-2"></div>
              <button id="process-image-btn" class="btn btn-primary mt-2 d-none">
                <i class="fas fa-magic me-2"></i> Process Image
              </button>
            </div>
          </div>
        </div>
        <div id="scan-result" class="mt-3"></div>
      </div>
    </div>
    <!-- Main Form Card -->
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Device Information</h5>
      </div>
      <div class="card-body">
        <form id="deposit-form" action="/deposits/create" method="POST">
          <!-- Device Information -->
          <h6 class="text-primary">Device Details</h6>
          <div class="row mb-4">
            <div class="col-md-4">
              <div class="form-group">
                <label for="model">Model</label>
                <input type="text" id="model" name="model" class="form-control" placeholder="Device Model">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="partNumber">Part Number</label>
                <input type="text" id="partNumber" name="partNumber" class="form-control" placeholder="Part Number">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="manufactureDate">Manufacture Date</label>
                <input type="text" id="manufactureDate" name="manufactureDate" class="form-control" placeholder="YYYY-MM-DD">
              </div>
            </div>
          </div>

          <!-- Serial Numbers and IDs -->
          <h6 class="text-primary">Serial Numbers & Identifiers</h6>
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="form-group">
                <label for="productionSN">Production S/N</label>
                <input type="text" id="productionSN" name="productionSN" class="form-control" placeholder="Production Serial Number">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="gponSN">GPON S/N</label>
                <input type="text" id="gponSN" name="gponSN" class="form-control" placeholder="GPON Serial Number">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="gponSNHex">GPON S/N HEX</label>
                <input type="text" id="gponSNHex" name="gponSNHex" class="form-control" placeholder="GPON Hex Serial Number">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="wanMAC">WAN MAC</label>
                <input type="text" id="wanMAC" name="wanMAC" class="form-control" placeholder="WAN MAC Address">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="voipMAC">VOIP MAC</label>
                <input type="text" id="voipMAC" name="voipMAC" class="form-control" placeholder="VOIP MAC Address">
              </div>
            </div>
          </div>

          <!-- Notes -->
          <h6 class="text-primary">Additional Information</h6>
          <div class="form-group mb-4">
            <label for="notes">Notes</label>
            <textarea id="notes" name="notes" class="form-control" rows="3" placeholder="Add any additional information about this device"></textarea>
          </div>

          <!-- Submit Button -->
          <div class="d-grid">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save me-2"></i> Save & Continue to Upload Images
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %> 